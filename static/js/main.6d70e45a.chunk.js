(this.webpackJsonpuntitled=this.webpackJsonpuntitled||[]).push([[0],{200:function(e,t,r){e.exports={spinnerWrapper:"LoadingHandler_spinnerWrapper__r2_1a",spinner:"LoadingHandler_spinner__2JaJ-"}},280:function(e,t,r){e.exports=r(493)},285:function(e,t,r){},493:function(e,t,r){"use strict";r.r(t),r.d(t,"configureStore",(function(){return It}));var a=r(0),n=r.n(a),c=r(17),i=r.n(c),o=(r(285),r(286),r(509)),u=r(505),l=r(55),s=r(497),m=r(93),d=r(269),p=r.n(d),E=r(79),f=r(34),g=r(64),y=r(273),h=r(80),S=r(507),b=r(494),v=r(508),I=r(506),O=r(495),R=r(503),T=5,x=6,C={items:[],totalQnty:0,totalPrice:{usd:0,eur:0},deliveryPrice:{usd:0,eur:0}},P=function(e){return{type:"ADD_ITEM",payload:e}},j=function(e){return{type:"REMOVE_ITEM",payload:e}},_=function(e,t){return S.a(b.a("id",e))(t)},w=function(e){for(var t=0,r=0,a=0,n=0,c=0,i=0;i<e.length;i++)t+=e[i].qnty,r+=e[i].price.usd*e[i].qnty,a+=e[i].price.eur*e[i].qnty;return r<20&&(n=T,c=x),{totalQnty:t,totalPrice:{usd:(r+n).toFixed(2),eur:(a+c).toFixed(2)},deliveryPrice:{usd:n,eur:c}}},M=function(e,t,r){var a=r?1:-1,n=t[e].qnty+a;return v.a(e,Object(h.a)({},t[e],{qnty:n,totalPriceByType:{usd:Number(n*t[e].price.usd).toFixed(2),eur:Number(n*t[e].price.eur).toFixed(2)}}),t)},k=function(e,t){return Object(h.a)({items:e},t)},N=r(56),F=r(510),U=r(502),A=r(496),D=r(498),z=r(501),L=r(504),H=r(499),Q=new RegExp("^(\\+7|7|8)?[\\s\\-]?\\(?[489][0-9]{2}\\)?[\\s\\-]?[0-9]{3}[\\s\\-]?[0-9]{2}[\\s\\-]?[0-9]{2}$"),q=function(e){try{return JSON.parse(localStorage.getItem(e))}catch(t){console.error("LocalStorage error happen while getting ".concat(e),t)}},Y=function(e){return n.a.createElement(n.a.Fragment,null,"$",e.usd,"; \u20ac",e.eur)};function B(e){return{REQUEST:"".concat(e,"_").concat("REQUEST"),SUCCESS:"".concat(e,"_").concat("SUCCESS"),FAILURE:"".concat(e,"_").concat("FAILURE"),INITIAL:"".concat(e,"_").concat("INITIAL")}}function J(e,t){return{type:e,payload:t}}function W(e){return{type:e}}function G(e){return{type:e}}var V=B("ORDER_PLACEMENT"),$=function(e){return J(V.REQUEST,e)},X=function(e){return W(V.SUCCESS)},K=function(e){return J(V.FAILURE,{errorMessage:e})},Z=function(){return G(V.INITIAL)},ee=r(237),te=r.n(ee).a.create({baseURL:"https://jsonplaceholder.typicode.com",timeout:5e3}),re="* INITIAL *",ae="* LOADING *",ne="* SUCCESS *",ce="* FAILURE *",ie=r(126),oe=r.n(ie),ue=U.a.Paragraph,le=U.a.Text,se={labelCol:{span:8},wrapperCol:{span:16}},me=function(e){return e&&e<N().subtract(1,"day")},de=function(){return{disabledHours:function(){return function(e,t){for(var r=[],a=e;a<t;a++)r.push(a);return r}(0,N().add(1,"hours").format("H"))}}},pe="ORDER_ITEMS_REVIEW",Ee="ORDER_INFO_FORM",fe="ORDER_PLACED_SUCCESS",ge="ORDER_PLACED_FAILURE",ye=Object(g.b)((function(e){return{shoppingCartItems:e.shoppingCartReducer,orderPlacementReducer:e.orderPlacementReducer}}),(function(e){return{addItemToCart:function(t){return e(P(t))},removeItemFromCart:function(t){return e(j(t))},resetCartToInitial:function(){return e({type:"RESET_SHOPPING_CART"})},placeOrder:function(t){return e($(t))},resetOrderToInitial:function(){return e(Z())}}}))((function(e){var t=e.resetCartToInitial,r=e.shoppingCartItems,c=e.addItemToCart,i=e.removeItemFromCart,o=e.orderPlacementReducer,s=e.placeOrder,m=e.resetOrderToInitial,d=o.loadingStatus,p=o.errorMessage,f=Object(a.useState)(pe),g=Object(y.a)(f,2),h=g[0],S=g[1];Object(a.useEffect)((function(){return function(){m()}}),[]),Object(a.useEffect)((function(){d===ne?(S(fe),t()):d===ce&&S(ge)}),[o]);var b,v,I=F.a(r.items);return n.a.createElement(n.a.Fragment,null,h===pe&&n.a.createElement(n.a.Fragment,null,n.a.createElement(D.a,{columns:(b=c,v=i,[{title:"Pizza",dataIndex:"name"},{title:"Price",render:function(e,t,r){return Y(t.price)}},{title:"Quantity",dataIndex:"qnty"},{title:"Total",render:function(e,t,r){return Y(t.totalPriceByType)}},{title:"",key:"x",render:function(e,t){return n.a.createElement(A.a,{size:"middle"},n.a.createElement("a",{onClick:function(){return b(t)}},"Add"),n.a.createElement("a",{onClick:function(){return v(t)}},"Remove"))}}]),dataSource:r.items,expanablde:!0,summary:function(){return!I&&n.a.createElement(n.a.Fragment,null,n.a.createElement(D.a.Summary.Row,null,n.a.createElement(D.a.Summary.Cell,{index:0},"Delivery"),n.a.createElement(D.a.Summary.Cell,{index:1}),n.a.createElement(D.a.Summary.Cell,{index:2}),n.a.createElement(D.a.Summary.Cell,{index:3},0===(e=r.deliveryPrice).usd?"Free":Y(e))),n.a.createElement(D.a.Summary.Row,null,n.a.createElement(D.a.Summary.Cell,{index:0},"Summary"),n.a.createElement(D.a.Summary.Cell,{index:1}),n.a.createElement(D.a.Summary.Cell,{index:2},r.totalQnty),n.a.createElement(D.a.Summary.Cell,{index:3},Y(r.totalPrice))));var e}}),!I&&n.a.createElement(l.a,{type:"primary",onClick:function(){return S(Ee)}},"Proceed to Order")),h===Ee&&n.a.createElement("div",{style:{width:500,margin:"0 auto"}},n.a.createElement(z.a,Object.assign({},se,{name:"basic",onFinish:function(e){var t={key:"_"+Math.random().toString(36).substr(2,9),address:e.address,deliveryTime:e.deliveryTime.toDate(),clientName:e.clientName,phoneNumber:e.phoneNumber,orderItems:r};s(t)}}),n.a.createElement(z.a.Item,{label:"Name",name:"clientName",rules:[{required:!0,message:"Please input your name!"}]},n.a.createElement(L.a,null)),n.a.createElement(z.a.Item,{label:"Address",name:"address",rules:[{required:!0,message:"Please input your address!"}]},n.a.createElement(L.a,null)),n.a.createElement(z.a.Item,{label:"Phone Number",name:"phoneNumber",rules:[{required:!0,message:"Please input your phone number!"},{validator:function(e,t){return r=t,Q.test(r)?Promise.resolve():Promise.reject("Phone number is invalid");var r}}]},n.a.createElement(L.a,null)),n.a.createElement(z.a.Item,{name:"deliveryTime",label:"Select delivery time",rules:[{type:"object",required:!0,message:"Please select delivery time!"}]},n.a.createElement(H.a,{disabledDate:me,disabledTime:de,showTime:!0,format:"YYYY-MM-DD HH:mm"})),n.a.createElement(z.a.Item,null,n.a.createElement(l.a,{loading:d===ae,type:"primary",htmlType:"submit"},"Submit")))),h===fe&&n.a.createElement(u.a,{status:"success",title:"Order has been successfully placed",extra:[n.a.createElement(E.b,{to:"/"},n.a.createElement(l.a,{type:"primary",key:"console"},"Go To Menu"))]}),h===ge&&n.a.createElement(u.a,{status:"error",title:"Submission Failed",subTitle:"Please check and modify the following information before resubmitting.",extra:[n.a.createElement(l.a,{type:"primary",key:"console"},"Go To Menu"),n.a.createElement(l.a,{onClick:function(){return S(pe)}},"Try again")]},n.a.createElement("div",{className:"desc"},n.a.createElement(ue,null,n.a.createElement(le,{strong:!0,style:{fontSize:16}},"The order you submitted has the following error:")),n.a.createElement(ue,null,n.a.createElement(oe.a,{className:"site-result-demo-error-icon"})," ",p.message))))})),he=B("ORDERS_HISTORY"),Se=function(){return W(he.REQUEST)},be=function(e){return J(he.SUCCESS,e)},ve=function(e){return J(he.FAILURE,{errorMessage:e})},Ie=[{title:"Order Time",dataIndex:"deliveryTime",key:"deliveryTime",render:function(e,t,r){return N(t.deliveryTime).format("YYYY-MM-DD")}},{title:"Address",dataIndex:"address",key:"address"},{title:"Client name",dataIndex:"clientName",key:"clientName"},{title:"Price",dataIndex:"totalPrice",key:"totalPrice",render:function(e,t,r){return Y(t.orderItems.totalPrice)}}],Oe=Object(g.b)((function(e){var t=e.ordersHistoryReducer;return{loadingStatus:t.loadingStatus,errorMessage:t.errorMessage,data:t.data}}),(function(e){return{getOrdersHistory:function(){return e(Se())}}}))((function(e){var t=e.getOrdersHistory,r=e.data,c=e.loadingStatus;return Object(a.useEffect)((function(){t()}),[]),n.a.createElement(D.a,{columns:Ie,expandable:{expandedRowRender:function(e){return n.a.createElement("ul",{style:{margin:0}},e.orderItems.items.map((function(e){return n.a.createElement("li",{key:e.id},e.name," - ",e.qnty)})))}},dataSource:r,loading:c===ae})})),Re=r(500),Te=r(119),xe=r(61),Ce=B("MENU"),Pe=function(){return W(Ce.REQUEST)},je=function(e){return J(Ce.SUCCESS,e)},_e=function(e){return J(Ce.FAILURE,{errorMessage:e})},we=r(262),Me=r(200),ke=r.n(Me),Ne=U.a.Paragraph,Fe=U.a.Text,Ue=function(e){var t=e.children,r=e.errorMessage,a=e.loadingStatus,c=e.minHeight,i=void 0===c?200:c;return n.a.createElement(n.a.Fragment,null,a===ne&&t,a===ae&&n.a.createElement("div",{style:{minHeight:i},className:ke.a.spinnerWrapper},n.a.createElement("div",{className:ke.a.spinner},n.a.createElement(we.a,null))),a===ce&&n.a.createElement(u.a,{status:"error",title:"Loading Failed"},n.a.createElement("div",{className:"desc"},n.a.createElement(Ne,null,n.a.createElement(Fe,{strong:!0,style:{fontSize:16}},"The following error happen:")),n.a.createElement(Ne,null,n.a.createElement(oe.a,{className:"site-result-demo-error-icon"})," ",r.message))))},Ae=Re.a.Meta,De=Object(g.b)((function(e){var t=e.menuReducer,r=t.data,a=t.loadingStatus,n=t.errorMessage;return{shoppingCartItems:e.shoppingCartReducer,data:r,loadingStatus:a,errorMessage:n}}),(function(e){return{addItemToCart:function(t){return e(P(t))},removeItemFromCart:function(t){return e(j(t))},getMenu:function(){return e(Pe())}}}))((function(e){var t=e.getMenu,r=e.data,c=e.addItemToCart,i=e.loadingStatus,o=e.errorMessage;return Object(a.useEffect)((function(){t()}),[]),n.a.createElement(Ue,{loadingStatus:i,errorMessage:o,minHeight:400},n.a.createElement(Te.a,{gutter:[0,20],justify:"space-around"},r.map((function(e){return n.a.createElement(xe.a,{key:e.id,xs:{span:4,offset:1},lg:{span:4}},n.a.createElement(Re.a,{hoverable:!0,style:{width:240},cover:n.a.createElement("img",{alt:e.name,src:e.img})},n.a.createElement(Ae,{title:e.name}),e.ingredients.join(),n.a.createElement("p",null,Y(e.price)),n.a.createElement(l.a,{type:"primary",onClick:function(){return c(e)}},"Add to the cart")))}))))})),ze=s.a.Header;var Le=Object(g.b)((function(e){return{shoppingCartItems:e.shoppingCartReducer}}))((function(e){e.isAuth,e.addItemToCart,e.removeItemFromCart;var t=e.shoppingCartItems;return n.a.createElement(E.a,{basename:"/"},n.a.createElement(s.a,null,n.a.createElement(ze,null,n.a.createElement(m.a,{theme:"dark",mode:"horizontal",defaultSelectedKeys:["1"]},n.a.createElement(m.a.Item,{key:"1"},n.a.createElement(E.b,{to:"/"},"Menu")),n.a.createElement(m.a.Item,{key:"2"},n.a.createElement(E.b,{to:"/ordershistory"},"Orders history")),n.a.createElement(m.a.Item,{key:"3"},n.a.createElement(E.b,{to:"/cart"},n.a.createElement(o.a,{count:t.totalQnty},n.a.createElement(p.a,null)))))),n.a.createElement(s.a,null,n.a.createElement(f.c,null,n.a.createElement(f.a,{exact:!0,path:"/"},n.a.createElement(De,null)),n.a.createElement(f.a,{path:"/cart"},n.a.createElement(ye,null)),n.a.createElement(f.a,{path:"/ordershistory"},n.a.createElement(Oe,null)),n.a.createElement(f.a,{path:"*"},n.a.createElement(u.a,{status:"404",title:"404",subTitle:"Sorry, the page you visited does not exist.",extra:n.a.createElement(E.b,{to:"/"},n.a.createElement(l.a,{type:"primary"},"Back Home"))}))))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var He=r(65),Qe=function(e,t){return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,a=arguments.length>1?arguments[1]:void 0;switch(console.log("action",a),a.type){case t.REQUEST:return Object(h.a)({},r,{loadingStatus:ae});case t.FAILURE:return Object(h.a)({},r,{},a.payload,{loadingStatus:ce});case t.SUCCESS:return Object(h.a)({},r,{},a.payload,{loadingStatus:ne});case t.INITIAL:return e;default:return r}}},qe=Qe({data:[],loadingStatus:re,errorMessage:null},he),Ye=Qe({data:[],loadingStatus:re,errorMessage:null},Ce),Be=Qe({data:[],loadingStatus:re,errorMessage:null},V),Je=Object(He.c)({shoppingCartReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0,r=_(I.a(["payload","id"],t),e.items);switch(t.type){case"ADD_ITEM":if(-1===r){var a=O.a(Object(h.a)({},t.payload,{qnty:1,totalPriceByType:{usd:t.payload.price.usd,eur:t.payload.price.eur}}),e.items),n=w(a);return k(a,n)}var c=M(r,e.items,!0),i=w(c);return k(c,i);case"REMOVE_ITEM":if(-1===r)return e;if(1===e.items[r].qnty){var o=R.a((function(t){return t.id!==e.items[r].id}),e.items),u=w(o);return k(o,u)}var l=M(r,e.items,!1),s=w(l);return k(l,s);case"RESET_SHOPPING_CART":return C;default:return e}},ordersHistoryReducer:qe,menuReducer:Ye,orderPlacementReducer:Be}),We=r(272),Ge=r(42),Ve=r.n(Ge),$e=r(114),Xe=r(274),Ke=r(41),Ze=Ve.a.mark(at),et=Ve.a.mark(it),tt=Ve.a.mark(ot),rt=function(){return te.get("/posts")};function at(){var e;return Ve.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(Ke.a)(rt);case 3:return t.sent,e=q("ORDER_HISTORY"),t.next=7,Object(Ke.b)(be({data:e}));case 7:t.next=13;break;case 9:return t.prev=9,t.t0=t.catch(0),t.next=13,Object(Ke.b)(ve(t.t0));case 13:case"end":return t.stop()}}),Ze,null,[[0,9]])}var nt=function(e){return te.post("/posts",e)},ct=function(e){var t=q("ORDER_HISTORY")||[];!function(e,t){try{localStorage.setItem(t,JSON.stringify(e))}catch(r){console.error("LocalStorage error happen while setting ".concat(t," with payload: ").concat(e),r)}}([].concat(Object(Xe.a)(t),[e]),"ORDER_HISTORY")};function it(e){var t;return Ve.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,r.prev=1,r.next=4,Object(Ke.a)(nt,t);case 4:return r.sent,r.next=7,Object(Ke.b)(X());case 7:ct(t),r.next=14;break;case 10:return r.prev=10,r.t0=r.catch(1),r.next=14,Object(Ke.b)(K(r.t0));case 14:case"end":return r.stop()}}),et,null,[[1,10]])}function ot(){return Ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ke.c)(he.REQUEST,at);case 2:return e.next=4,Object(Ke.c)(V.REQUEST,it);case 4:case"end":return e.stop()}}),tt)}var ut=r(70),lt=r.n(ut),st=Ve.a.mark(gt),mt=Ve.a.mark(yt),dt=["pepper","salmon","bacon","tomato","mozzarella","fish","cheese","mayo","onion","mushrooms"],pt=function(){for(var e=[],t=0;t<5;t++)e.push(dt[Math.floor(Math.random()*dt.length)]);return e},Et=[{name:"Pizza One",ingredients:pt(),img:lt.a,price:{usd:5.5,eur:6.7},id:1},{name:"Pizza Two",ingredients:pt(),img:lt.a,price:{usd:2,eur:3},id:2},{name:"Pizza Three",ingredients:pt(),img:lt.a,price:{usd:6.5,eur:8},id:3},{name:"Pizza Four",ingredients:pt(),img:lt.a,price:{usd:10.5,eur:12},id:4},{name:"Pizza Five",ingredients:pt(),img:lt.a,price:{usd:14.5,eur:16},id:5},{name:"Pizza Six",ingredients:pt(),img:lt.a,price:{usd:1.5,eur:3},id:6},{name:"Pizza Seven",ingredients:pt(),img:lt.a,price:{usd:7,eur:9},id:7},,{name:"Pizza Eight",ingredients:pt(),img:lt.a,price:{usd:6,eur:7},id:8}],ft=function(){return te.get("/posts")};function gt(){return Ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(Ke.a)(ft);case 3:return e.sent,e.next=6,Object(Ke.b)(je({data:Et}));case 6:e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(0),e.next=12,Object(Ke.b)(_e(e.t0));case 12:case"end":return e.stop()}}),st,null,[[0,8]])}function yt(){return Ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ke.c)(Ce.REQUEST,gt);case 2:case"end":return e.stop()}}),mt)}var ht=Ve.a.mark(St);function St(){return Ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object($e.a)([Object($e.c)(ot),Object($e.c)(yt)]);case 2:case"end":return e.stop()}}),ht)}var bt=Object(We.a)(),vt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||He.d;function It(){var e=Object(He.e)(Je,vt(Object(He.a)(bt)));return bt.run(St),e}var Ot=It();i.a.render(n.a.createElement(g.a,{store:Ot},n.a.createElement(n.a.StrictMode,null,n.a.createElement(Le,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},70:function(e,t,r){e.exports=r.p+"static/media/istockphoto-938742222-1024x1024.07075419.jpg"}},[[280,1,2]]]);
//# sourceMappingURL=main.6d70e45a.chunk.js.map